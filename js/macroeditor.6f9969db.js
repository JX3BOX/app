(function(e){function t(t){for(var a,i,o=t[0],r=t[1],c=t[2],f=0,d=[];f<o.length;f++)i=o[f],Object.prototype.hasOwnProperty.call(l,i)&&l[i]&&d.push(l[i][0]),l[i]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,o=1;o<n.length;o++){var r=n[o];0!==l[r]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},l={macroeditor:0},s=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://cdn.jx3box.com/static/app/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=r;s.push([6,"chunk-vendors"]),n()})({"03cb":function(e,t,n){},"0681":function(e,t,n){"use strict";n("03cb")},"0a0b":function(e,t,n){},"216c":function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("nav",{staticClass:"m-nav"},[t("h5",{staticClass:"u-title"},[e._v("应用入口")]),t("div",{staticClass:"m-app-box"},e._l(e.data,(function(n){return t("a",{key:n.slug,staticClass:"u-app",class:{on:e.isActive(n.slug)},attrs:{href:"../"+n.slug}},[t("i",{staticClass:"u-app-icon"},[t("img",{attrs:{src:e.getIcon(n.slug)}})]),t("span",[e._v(e._s(n.abbr))])])})),0)])},l=[],s=(n("caad"),n("2532"),n("65c2")),i={name:"Nav",data:function(){return{data:[{slug:"database",abbr:"数据库"},{slug:"icons",abbr:"图标"},{slug:"talent",abbr:"奇穴"},{slug:"talent2",abbr:"镇派"},{slug:"meridians",abbr:"经脉"},{slug:"haste",abbr:"急速"},{slug:"macroeditor",abbr:"写宏"},{slug:"translator",abbr:"繁體"},{slug:"servers",abbr:"开服"},{slug:"price",abbr:"金价"},{slug:"sudoku",abbr:"九宫格"}]}},computed:{},methods:{isActive:function(e){return!!location.pathname.split("/").includes(e)},getIcon:function(e){return s["__imgPath"]+"image/box/"+e+".svg"}},mounted:function(){}},o=i,r=(n("0681"),n("2877")),c=Object(r["a"])(o,a,l,!1,null,null,null);t["a"]=c.exports},4678:function(e,t,n){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function l(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}l.keys=function(){return Object.keys(a)},l.resolve=s,e.exports=l,l.id="4678"},5383:function(e,t,n){"use strict";n("0a0b")},"5d99":function(e,t,n){"use strict";n("c5b5")},6:function(e,t,n){e.exports=n("6c37")},"6c37":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),l=n("5c96"),s=n.n(l),i=n("6a69"),o=(n("6b30"),n("c5b4"),n("b0c0"),n("caad"),n("2532"),function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("Header"),t("Breadcrumb",{attrs:{name:"宏编辑器",slug:"macroeditor",root:"/app/macroeditor",feedbackEnable:!0,crumbEnable:!0}},[t("img",{attrs:{slot:"logo","svg-inline":"",src:e.getIcon("macroeditor")},slot:"logo"}),t("div",{staticClass:"m-info"})]),t("LeftSidebar",{attrs:{open:!1}},[t("Nav")],1),t("Main",{staticClass:"m-macroeditor",attrs:{withoutRight:!0,withoutLeft:!0}},[t("h1",{staticClass:"m-macroeditor-title"},[e._v(" 智能宏编辑器 "),t("a",{staticClass:"u-help el-button el-button--success is-plain el-button--mini",attrs:{href:"/tool/265",target:"_blank"}},[t("i",{staticClass:"el-icon-s-management"}),e._v(" 宏语法参考手册 ")])]),t("div",{staticClass:"m-editor"},[t("el-row",[t("el-col",{attrs:{span:12}},[t("div",{staticClass:"m-col m-col-left"},[t("h2",{staticClass:"u-subtitle"},[t("svg",{class:"",attrs:{height:"512",viewBox:"0 0 512 512",width:"512",xmlns:"http://www.w3.org/2000/svg","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{d:"M504 275.09a8 8 0 00-5.27-7.52L384 225.85V92.23h-.31a7.922 7.922 0 00-4.96-9.66l-120-43.63a7.888 7.888 0 00-5.46 0l-120 43.63a8.018 8.018 0 00-5.06 5.78H128v137.5L13.27 267.57a8.018 8.018 0 00-5.06 5.78H8v141.82h.2a7.988 7.988 0 005.07 9.26l120 43.63a7.854 7.854 0 005.46 0L256 425.42l117.27 42.64a7.854 7.854 0 005.46 0l120-43.63a7.985 7.985 0 004.97-5.38h.3V277.23s-.006-1.416 0-2.14zM128 449.12L24 411.31v-124.8l104 37.82zm8-138.91l-96.59-35.12 95.96-34.9 96.6 35.13zm112 101.1l-104 37.81V324.33l104-37.82zm0-147.64l-104-37.82V101.51l104 37.82zM159.41 90.09L256 54.97l96.59 35.12L256 125.21zM368 101.51v124.34l-104 37.82V139.33zm0 347.61l-104-37.81v-124.8l104 37.82zm8-138.91l-95.97-34.89 96.6-35.13 95.96 34.9zm112 101.1l-104 37.81V324.33l104-37.82z"}})]),e._v("快捷插入")]),t("el-form",{ref:"form",staticClass:"u-cmds",attrs:{model:e.form,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"释放方式"}},[t("el-radio-group",{model:{value:e.castType,callback:function(t){e.castType=t},expression:"castType"}},[t("el-radio",{attrs:{label:"cast"}},[e._v("释放(cast)")]),t("el-radio",{attrs:{label:"fcast"}},[e._v("强制施放(fcast)")])],1)],1),t("el-form-item",{attrs:{label:"技能名"}},[t("el-input",{model:{value:e.skill,callback:function(t){e.skill=t},expression:"skill"}})],1),t("el-form-item",{attrs:{label:"条件释放"}},[t("el-switch",{model:{value:e.isConditional,callback:function(t){e.isConditional=t},expression:"isConditional"}}),e.isConditional&&e.conditions.length>2?[t("span",{staticClass:"btn-help"},[t("el-button",{attrs:{plain:"",icon:"el-icon-info"},on:{click:e.showRealLogic}},[e._v("点击查看实际逻辑关系")])],1),t("el-alert",{attrs:{title:"请注意，此处选择的逻辑将不做处理，直接转换为宏中的 & 和 | ",type:"warning"}}),t("el-dialog",{attrs:{title:"实际逻辑",visible:e.logicDialogVisible,width:Math.min(640,.9*this.windowInnerWidth)+"px"},on:{"update:visible":function(t){e.logicDialogVisible=t}}},[t("span",[e._v(e._s(e.logicDialog))]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.logicDialogVisible=!1}}},[e._v("确 定")])],1)])]:e._e()],2),e.isConditional?e._l(e.conditions,(function(n,a){return t("el-form-item",{key:a,attrs:{label:"条件".concat(a+1)}},[a>=1?[t("el-form-item",{attrs:{label:""}},[t("el-radio-group",{model:{value:n.logic,callback:function(t){e.$set(n,"logic",t)},expression:"condition.logic"}},[t("el-radio",{attrs:{label:"&"}},[e._v("并且(and)")]),t("el-radio",{attrs:{label:"|"}},[e._v("或(or)")])],1)],1)]:e._e(),t("el-row",{attrs:{gutter:6}},[t("el-col",{attrs:{span:16}},[t("el-select",{attrs:{placeholder:"判断项目"},on:{change:function(t){return e.onConditionChange(a)}},model:{value:n.name,callback:function(t){e.$set(n,"name",t)},expression:"condition.name"}},[t("el-option",{attrs:{label:"自身有增减益效果",value:"buff"}}),t("el-option",{attrs:{label:"自身有增减益效果层数",value:"buff_level"}}),t("el-option",{attrs:{label:"目标有增减益效果",value:"tbuff"}}),t("el-option",{attrs:{label:"目标有增减益效果层数",value:"tbuff_level"}}),t("el-option",{attrs:{label:"自身增减益效果持续时间",value:"bufftime"}}),t("el-option",{attrs:{label:"目标增减益效果持续时间",value:"tbufftime"}}),t("el-option",{attrs:{label:"自身不存在某增减益效果",value:"nobuff"}}),t("el-option",{attrs:{label:"目标不存在某增减益效果",value:"tnobuff"}}),t("el-option",{attrs:{label:"目标NPC强度等级",value:"npclevel"}}),t("el-option",{attrs:{label:"生命值和最大血量的比值",value:"life"}}),t("el-option",{attrs:{label:"内力值和最大内力值的比值",value:"mana"}}),t("el-option",{attrs:{label:"剑气/尘身刀气/战意/怒气值",value:"rage"}}),t("el-option",{attrs:{label:"纯阳气点/少林禅那/七秀剑舞值",value:"qidian"}}),t("el-option",{attrs:{label:"神机/竹雾刀气/格挡值",value:"energy"}}),t("el-option",{attrs:{label:"日灵/金屏刀气值",value:"sun"}}),t("el-option",{attrs:{label:"月魂值",value:"moon"}}),t("el-option",{attrs:{label:"满日状态",value:"sun_power"}}),t("el-option",{attrs:{label:"满月状态",value:"moon_power"}}),t("el-option",{attrs:{label:"充能技能的当前充能层数",value:"skill_energy"}}),t("el-option",{attrs:{label:"存在某技能/奇穴ID",value:"skill"}}),t("el-option",{attrs:{label:"不存在某技能/奇穴ID",value:"noskill"}}),t("el-option",{attrs:{label:"该宏最后一次释放的技能",value:"last_skill"}}),t("el-option",{attrs:{label:"周围3尺以内敌人数量",value:"nearby_enemy"}}),t("el-option",{attrs:{label:"技能调息完成",value:"skill_notin_cd"}}),t("el-option",{attrs:{label:"药性点数",value:"yaoxing"}})],1),t("el-row",{attrs:{gutter:2}},[e.needsConditionParams.subname.includes(n.name)?t("el-col",{attrs:{span:10}},[t("el-input",{attrs:{placeholder:"名称"},model:{value:n.subname,callback:function(t){e.$set(n,"subname",t)},expression:"condition.subname"}})],1):e._e(),e.needsConditionParams.relation.includes(n.name)?t("el-col",{attrs:{span:7}},[e.needsConditionParams.relationRestricted.includes(n.name)?t("el-select",{model:{value:n.relation,callback:function(t){e.$set(n,"relation",t)},expression:"condition.relation"}},[t("el-option",{attrs:{label:"=",value:"="}}),t("el-option",{attrs:{label:"≠",value:"~="}})],1):t("el-select",{model:{value:n.relation,callback:function(t){e.$set(n,"relation",t)},expression:"condition.relation"}},[t("el-option",{attrs:{label:"=",value:"="}}),t("el-option",{attrs:{label:"＜",value:"<"}}),t("el-option",{attrs:{label:"＞",value:">"}}),t("el-option",{attrs:{label:"≥",value:">="}}),t("el-option",{attrs:{label:"≤",value:"<="}}),t("el-option",{attrs:{label:"≠",value:"~="}})],1)],1):e._e(),e.needsConditionParams.value.includes(n.name)?t("el-col",{attrs:{span:7}},[t("el-input",{attrs:{placeholder:"值"},model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"condition.value"}})],1):e._e()],1)],1),t("el-col",{attrs:{span:7}},[e.conditions.length>1?t("el-button",{attrs:{type:"danger",plain:"",circle:"",icon:"el-icon-minus"},on:{click:function(t){return e.clickMinusCondition(a)}}}):e._e(),a===e.conditions.length-1?t("el-button",{staticStyle:{"margin-left":"2px"},attrs:{type:"primary",plain:"",circle:"",icon:"el-icon-plus"},on:{click:e.clickPlusCondition}}):e._e()],1)],1)],2)})):e._e()],2),t("div",{staticClass:"u-submit"},[t("el-button",{staticClass:"u-btn",attrs:{type:"primary",icon:"el-icon-right"},on:{click:e.insertLine}},[e._v("插入")])],1)],1)]),t("el-col",{attrs:{span:12}},[t("div",{staticClass:"m-col m-col-right"},[t("h2",{staticClass:"u-subtitle"},[t("svg",{class:"",attrs:{height:"512",viewBox:"0 0 512 512",width:"512",xmlns:"http://www.w3.org/2000/svg","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("linearGradient",{attrs:{id:"a",gradientUnits:"userSpaceOnUse",x1:"63.155",x2:"450.135",y1:"579.855",y2:"80.38"}},[t("stop",{attrs:{offset:"0","stop-color":"#003f8a"}}),t("stop",{attrs:{offset:".518","stop-color":"#00d7df"}}),t("stop",{attrs:{offset:"1","stop-color":"#006df0"}})],1),t("path",{attrs:{d:"M504 275.09a8 8 0 00-5.27-7.52L384 225.85V92.23h-.31a7.922 7.922 0 00-4.96-9.66l-120-43.63a7.888 7.888 0 00-5.46 0l-120 43.63a8.018 8.018 0 00-5.06 5.78H128v137.5L13.27 267.57a8.018 8.018 0 00-5.06 5.78H8v141.82h.2a7.988 7.988 0 005.07 9.26l120 43.63a7.854 7.854 0 005.46 0L256 425.42l117.27 42.64a7.854 7.854 0 005.46 0l120-43.63a7.985 7.985 0 004.97-5.38h.3V277.23s-.006-1.416 0-2.14zM128 449.12L24 411.31v-124.8l104 37.82zm8-138.91l-96.59-35.12 95.96-34.9 96.6 35.13zm112 101.1l-104 37.81V324.33l104-37.82zm0-147.64l-104-37.82V101.51l104 37.82zM159.41 90.09L256 54.97l96.59 35.12L256 125.21zM368 101.51v124.34l-104 37.82V139.33zm0 347.61l-104-37.81v-124.8l104 37.82zm8-138.91l-95.97-34.89 96.6-35.13 95.96 34.9zm112 101.1l-104 37.81V324.33l104-37.82z",fill:"url(#a)"}})],1),e._v("宏编辑区")]),t("p",{staticClass:"u-tips"},[e._v("按下Tab键即可自动联想补全")]),t("codemirror",{ref:"cmEditor",attrs:{options:e.cmOptions},on:{input:e.onCmCodeChange},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),t("div",{staticClass:"u-count"},[t("b",{class:{warning:e.code.length>128}},[e._v(e._s(e.code.length))]),e._v(" / 128 "),t("em",[e._v("（还可写 "+e._s(128-e.code.length)+" 字）")])])],1)])],1)],1),t("Footer")],1)],1)}),r=[],c=n("ade3"),u=(n("14d9"),n("a434"),n("ac1f"),n("5319"),n("9911"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-info"},[t("a",{staticClass:"u-channel",attrs:{href:e.APP_INFO.link}},[e._t("logo"),t("span",{staticClass:"u-title"},[e._v(e._s(e.APP_INFO.name))])],2),t("div",{staticClass:"u-stat"},[e._t("default")],2)])}),f=[],d={name:"Info",props:["APP_INFO"],data:function(){return{}},computed:{},methods:{},mounted:function(){}},b=d,m=(n("5383"),n("2877")),p=Object(m["a"])(b,u,f,!1,null,null,null),v=(p.exports,n("216c")),g=n("8f94"),j=(n("56b3"),n("a7be"),n("f9d4"),n("9b74"),n("f6b6"),n("8c33"),n("75e5"),n("65c2")),h={name:"Macro",data:function(){var e;return{windowInnerWidth:window.innerWidth,castType:"cast",form:null,skill:"",isConditional:!1,needsConditionParams:{subname:["buff","buff_level","nobuff","bufftime","skill_energy","skill","noskill","skill_notin_cd","tbuff","tbuff_level","tnobuff","tbufftime"],relation:["buff_level","tbuff_level","bufftime","life","mana","rage","qidian","energy","sun","moon","skill_energy","last_skill","npclevel","nearby_enemy","tbufftime","yaoxing"],value:["buff_level","tbuff_level","bufftime","life","mana","rage","qidian","energy","sun","moon","skill_energy","last_skill","npclevel","nearby_enemy","tbufftime","yaoxing"],relationRestricted:["skill","noskill","last_skill"]},conditions:[{name:"",relation:"=",value:"",logic:"&",subname:""}],conditionValueName:{buff:"存在增减益效果",buff_level:"增减益效果层数",nobuff:"不存在某增减益效果",bufftime:"增减益效果持续时间",life:"生命值和最大血量的比值",mana:"内力值和最大内力值的比值",rage:"剑气/尘身刀气/战意/怒气值",qidian:"纯阳气点",energy:"神机/竹雾刀气/格挡值",sun:"日灵/金屏刀气值",moon:"月魂值",sun_power:"满日状态",moon_power:"满月状态",skill_energy:"充能技能的当前充能层数",skill:"存在某技能/奇穴ID",noskill:"不存在某技能/奇穴ID",last_skill:"该宏最后一次释放的技能",npclevel:"目标NPC强度等级",nearby_enemy:"自身周围3尺以内敌人数量",skill_notin_cd:"技能调息完成",tbuff:"目标有增减益效果",tbuff_level:"目标有增减益效果层数",tnobuff:"目标不存在某增减益效果",tbufftime:"目标增减益效果持续时间"},logicDialogVisible:!1,logicDialog:"",region:"",cmOptions:(e={tabSize:4,lineNumbers:!0,line:!0,styleActiveLine:!0},Object(c["a"])(e,"lineNumbers",!0),Object(c["a"])(e,"mode","text/x-macro"),Object(c["a"])(e,"extraKeys",{Tab:"autocomplete"}),Object(c["a"])(e,"matchBrackets",!0),Object(c["a"])(e,"hintOptions",{completeSingle:!1}),e),code:""}},computed:{codemirror:function(){return this.$refs.cmEditor.codemirror}},methods:{getIcon:function(e){return j["__imgPath"]+"image/box/"+e+".svg"},clickPlusCondition:function(){this.conditions.push({name:"",relation:"=",value:"",logic:"&",subname:""})},clickMinusCondition:function(e){this.conditions.splice(e,1)},onConditionChange:function(e){var t=this.conditions[e].name,n=this.conditions[e].relation;"skill"!==t&&"noskill"!==t&&"last_skill"!==t||"="!==n&&"≠"!==n&&(this.conditions[e].relation="=")},insertLine:function(){var e="/"+this.castType+" ";if(this.isConditional){for(var t="[",n=0;n<this.conditions.length;++n){var a=this.conditions[n];0!==n&&(t+=a.logic),t+=a.name,this.needsConditionParams.subname.includes(a.name)&&(t=t+":"+a.subname),this.needsConditionParams.relation.includes(a.name)&&(t+=a.relation),this.needsConditionParams.value.includes(a.name)&&(t+=a.value)}t+="]",e=e+t+" "}e=e+this.skill+"\n",this.code+=e.replace(/buff_level/g,"buff")},onCmCodeChange:function(e){},showRealLogic:function(){if(this.conditions<=2)return!1;for(var e="",t=0;t<this.conditions.length;++t){var n=this.conditions[t];t===this.conditions.length-1?e+="&"===n.logic?" & ":" | ":0!==t&&(e+="&"===n.logic?" &（":" |（"),e+=n.name,this.needsConditionParams.subname.includes(n.name)&&(e=e+":"+n.subname),this.needsConditionParams.relation.includes(n.name)&&(e+=n.relation),this.needsConditionParams.value.includes(n.name)&&(e+=n.value)}for(var a=0;a<this.conditions.length-2;++a)e+="）";this.logicDialog=e.replace(/buff_level/g,"buff"),this.logicDialogVisible=!0},getUserId:function(){User.isLogin()&&(this.uid=User.getInfo().uid)}},filters:{},mounted:function(){},components:{codemirror:g["codemirror"],Nav:v["a"]}},_=h,k=(n("5d99"),Object(m["a"])(_,o,r,!1,null,null,null)),y=k.exports;a["default"].config.productionTip=!1,a["default"].use(s.a),a["default"].use(i["a"]),new a["default"]({render:function(e){return e(y)}}).$mount("#app")},"75e5":function(e,t,n){(function(e){var a,l,s,i=n("7037").default;n("caad"),n("ac1f"),n("466d"),n("4de4"),n("d3b7");var o=n("2ef0");o.after;(function(o){"object"==i(t)&&"object"==i(e)?o(n("56b3")):(l=[n("56b3")],a=o,s="function"===typeof a?a.apply(t,l):a,void 0===s||(e.exports=s))})((function(e){"use strict";e.defineMode("macro",(function(e,t){t.jsonld;function n(e){for(var t={},n=e.split(" "),a=0;a<n.length;++a)t[n[a]]=!0;return t}var a=n("/cast /fcast"),l=["&","|"],s=["<",">","<=",">=","=","~","~="],i=["buff","nobuff","bufftime","life","mana","rage","qidian","energy","sun","moon","sun_power","moon_power","skill_energy","skill","noskill","last_skill","npclevel","nearby_enemy","skill_notin_cd","tbuff","tnobuff","tbufftime"];function o(e,t){t.beforeParams;t.beforeParams=!1;var n=t.inCondition;t.inCondition=!1;t.afterOperator;var o=t.nextIsCondition;t.nextIsCondition=!1;var r=e.next();if(console.log("next",r),console.log("nextIsCondition",o),n){if("]"===r)return t.inCondition=!1,!1,t.afterOperator=!1,t.nextIsCondition=!1,"string-2";if(t.inCondition=!0,l.includes(r))return t.nextIsCondition=!0,"string-2";if(":"===r||s.includes(r))return t.afterOperator=!0,t.nextIsCondition=!1,"condition-operator";if(o){t.nextIsCondition=!0,e.match(/[a-z]+_?[a-z]+/);var c=e.current();if(i.includes(c))return"condition-name"}return console.log("this_current",e.current()),"condition-else"}if("["===r||l.includes(r))return console.log("ch",r),t.inCondition=!0,t.nextIsCondition=!0,"string-2";e.eatWhile(/[\w\$_{}\xa1-\uffff]/);var u=e.current();return a&&a.propertyIsEnumerable(u)?(t.beforeParams=!0,"keyword"):i&&i.includes(u)?(t.beforeParams=!0,"condition-name"):null}return{startState:function(){return{tokenize:o,beforeParams:!1,inParams:!1,inCondition:!1,afterOperator:!1,nextIsCondition:!1}},token:function(e,t){return e.eatSpace()?null:t.tokenize(e,t)}}})),e.registerHelper("hint","macro",(function(t){var n=["/cast","/fcast","buff","nobuff","bufftime","life","mana","rage","qidian","energy","sun","moon","sun_power","moon_power","skill_energy","skill","noskill","last_skill","npclevel","nearby_enemy","skill_notin_cd","tbuff","tnobuff","tbufftime"],a=t.getCursor(),l=t.getTokenAt(a),s=l.start,i=a.ch,o=l.string,r=n.filter((function(e){return 0===e.indexOf(o)}));if(r.length)return{list:r,from:e.Pos(a.line,s),to:e.Pos(a.line,i)}})),e.defineMIME("text/x-macro","macro")}))}).call(this,n("62e4")(e))},c5b5:function(e,t,n){}});
//# sourceMappingURL=macroeditor.6f9969db.js.map