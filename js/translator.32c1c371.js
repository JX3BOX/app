(function(e){function t(t){for(var n,o,s=t[0],c=t[1],l=t[2],u=0,p=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,s=1;s<a.length;s++){var c=a[s];0!==r[c]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={translator:0},i=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="https://console.cnyixun.com/static/app/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=c;i.push([8,"chunk-vendors","chunk-common"]),a()})({"1f16":function(t,a,n){"use strict";n.r(a);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=n("5c96"),o=n.n(i),s=n("6a69"),c=(n("6b30"),n("c5b4"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Header"),a("Breadcrumb",{attrs:{name:"簡繁轉換",slug:"translator",root:"/app/translator",feedbackEnable:!0,crumbEnable:!0}},[a("img",{attrs:{slot:"logo","svg-inline":"",src:e.getIcon("translator")},slot:"logo"})]),a("LeftSidebar",{attrs:{open:!1}},[a("Nav")],1),a("Main",{attrs:{withoutRight:!0,withoutLeft:!0}},[a("div",{staticClass:"m-translator"},[a("h1",{staticClass:"title"},[e._v("簡繁轉換工具")]),a("h3",{staticClass:"title"},[e._v("將宏或插件數據等轉為劍網三國際服專用繁體")]),a("el-tabs",{staticClass:"translate-wrapper",attrs:{type:"card","before-leave":e.tabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"文字轉換",disabled:e.isLoading,name:"translate-str"}},[a("div",{staticClass:"translate-content"},[a("el-input",{staticClass:"textarea-translate textarea-translate-pre",attrs:{type:"textarea",placeholder:"请输入原文（简体）内容。建议不要超过1000个汉字。大段文字容易导致浏览器卡死，建议使用文件转换功能。","validate-event":!1,resize:"none",maxlength:"10000","show-word-limit":""},model:{value:e.preTranslateText,callback:function(t){e.preTranslateText=t},expression:"preTranslateText"}}),a("el-input",{staticClass:"textarea-translate textarea-translate-post",attrs:{type:"textarea",placeholder:"轉換（繁體）之後的內容","validate-event":!1,resize:"none",readonly:!1},model:{value:e.postTranslateText,callback:function(t){e.postTranslateText=t},expression:"postTranslateText"}})],1),e.percentage<0?a("el-button",{staticClass:"btn-convert",attrs:{type:"primary",loading:e.isLoading,size:"medium"},on:{click:e.convertText}},[e._v(e._s(e.isLoading?"正在加載":"轉換"))]):e._e(),e.isLoading&&e.percentage>=0?a("el-progress",{attrs:{"text-inside":!0,"stroke-width":20,percentage:e.percentage}}):e._e()],1),a("el-tab-pane",{attrs:{label:"文件轉換",disabled:e.isLoading,name:"translate-file"}},[a("transition",{attrs:{name:"el-zoom-in-top"}},[""!==e.downloadFileUrl?a("el-alert",{attrs:{title:"转换成功!",type:"success","show-icon":""}},[e._v(" 如果沒有自動下載的話, "),a("el-button",{staticClass:"btn-download",attrs:{type:"text"},on:{click:e.downloadByUrl}},[e._v("點此下載")])],1):e._e()],1),a("h4",[e._v("上传的文件编码")]),a("el-radio-group",{model:{value:e.fileEncoding,callback:function(t){e.fileEncoding=t},expression:"fileEncoding"}},[a("el-radio",{attrs:{label:"gbk",border:""}},[e._v("GBK")]),a("el-radio",{attrs:{label:"utf-8",border:""}},[e._v("UTF-8")])],1),a("h5",{staticClass:"hint-inline"},[e._v("如果你不知道这是什么，请不要修改此选项")]),a("div",{staticClass:"translate-content"},[e.percentage<0?a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"upload-file",attrs:{drag:"",action:"javascript:void(0)","auto-upload":!0,"show-file-list":!1,"element-loading-text":"正在轉換,請稍後","http-request":e.uploadFile}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" 將文件拖到此處,或 "),a("em",[e._v("點擊上傳")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("暫不支持word等帶樣式文檔")])]):e._e(),e.isLoading&&e.percentage>=0?a("el-progress",{attrs:{type:"circle",percentage:e.percentage,format:e.progressFormat}}):e._e()],1)],1),a("el-tab-pane",{attrs:{label:"💖貢獻詞庫",disabled:e.isLoading,name:"add-dict"}})],1)],1),a("Footer")],1)],1)}),l=[],d=n("1da1"),u=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("a15b"),n("99af"),n("ac1f"),n("5319"),n("b0c0"),n("216c")),p=n("408b"),f=n("c9d2"),g=n("f7d6"),b=n("65c2"),m=new Blob([document.querySelector("#worker").textContent]),v=window.URL.createObjectURL(m),h=new Worker(v),w={name:"Translator",data:function(){return{worker:null,activeTabName:"translate-str",preTranslateText:"",postTranslateText:"",isLoading:!1,percentage:-1,downloadFileUrl:"",dict:g,fileEncoding:"gbk"}},computed:{},methods:{getIcon:function(e){return b["__imgPath"]+"image/box/"+e+".svg"},tabClick:function(e,t){if("add-dict"===e){var a=document.createElement("a");return a.href="https://github.com/JX3BOX/jx3box-dict",a.target="_blank",a.click(),!1}return!0},progressFormat:function(e){return 100===e?"完成":"".concat(e,"% \n正在轉換...")},initWorker:function(){var t=this;h.addEventListener("message",(function(e){var a=e.data;if(a.success)switch(a.type){case"str":t.postTranslateText=a.result,t.isLoading=!1,t.percentage=-1;break;case"file":t.downloadTranslatedFile(a.result),t.isLoading=!1,t.percentage=-1;break;case"progress":t.percentage=a.result;break;default:break}})),h.addEventListener("error",(function(a){t.$message.error("轉換出錯"),console.log(["ERROR: Line ",e.lineno," in ",e.filename,": ",e.message].join(""))}))},getDict:function(){var e=this,t="https://cdn.jsdelivr.net/gh/JX3BOX/jx3box-dict@master/dict.json?v=".concat(Date.now());Object(p["a"])(t).then((function(t){e.dict=t,e.isLoading=!1})).catch((function(t){switch(t.code){case-1:e.$message.error(t.msg);break;default:console.log(t),e.$message.error("[".concat(t.code,"]").concat(t.msg))}}))},convertText:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.preTranslateText,""!==a.replace(/\ /g,"")){t.next=3;break}return t.abrupt("return");case 3:e.isLoading=!0,e.percentage=0,h.postMessage({cmd:"translate-str",str:a,dict:e.dict});case 6:case"end":return t.stop()}}),t)})))()},uploadFile:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e.file){a.next=15;break}if(n=!0,t.isLoading=!0,!(e.file.size>1048576)){a.next=11;break}return a.next=6,t.checkLogin();case 6:if(n=a.sent,n){a.next=11;break}return t.$message.warning("转换的文件大小超过1MB需要先登录再尝试转换~"),t.isLoading=!1,a.abrupt("return");case 11:t.downloadFileUrl="",t.filename=e.file.name,t.percentage=0,h.postMessage({cmd:"translate-file",file:e.file,dict:t.dict,encoding:t.fileEncoding});case 15:case"end":return a.stop()}}),a)})))()},downloadTranslatedFile:function(e){var t=document.createElement("a");t.download="JX3BOX轉換-".concat(this.filename);var a=URL.createObjectURL(e);t.href=a,this.downloadFileUrl=a,t.click(),this.isLoading=!1},downloadByUrl:function(){if(""!==this.downloadFileUrl){var e=document.createElement("a");e.download="JX3BOX轉換-".concat(this.filename);var t=this.downloadFileUrl;e.href=t,e.click()}},checkLogin:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=!0,e.uid){t.next=5;break}a=!1,t.next=8;break;case 5:return t.next=7,e.testCheckIsLogin();case 7:a=t.sent;case 8:return t.abrupt("return",new Promise((function(e,t){e(a)})));case 9:case"end":return t.stop()}}),t)})))()},testCheckIsLogin:function(){return f["a"].isLogin()},getUserId:function(){f["a"].isLogin()&&(this.uid=f["a"].getInfo().uid)}},filters:{},created:function(){this.initWorker(),this.getDict()},mounted:function(){this.getUserId()},beforeDestroy:function(){h.terminate()},components:{Nav:u["a"]}},x=w,k=(n("32cb"),n("2877")),T=Object(k["a"])(x,c,l,!1,null,null,null),_=T.exports;r["default"].config.productionTip=!1,r["default"].use(o.a),r["default"].use(s["a"]),new r["default"]({render:function(e){return e(_)}}).$mount("#app")},"32cb":function(e,t,a){"use strict";a("831b")},8:function(e,t,a){e.exports=a("1f16")},"831b":function(e,t,a){}});
//# sourceMappingURL=translator.32c1c371.js.map